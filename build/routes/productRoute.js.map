{"version":3,"sources":["routes/productRoute.ts"],"names":[],"mappings":"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","file":"routes/productRoute.js","sourcesContent":["/// <reference path=\"./../../typings/index.d.ts\" />\nimport express = require(\"express\");\nimport HttpResult = require(\"./../modules/HttpResult\");\nimport ProductCtrl = require(\"./../controller/ProductCtrl\");\nimport Tool = require(\"./../modules/Tool\");\nimport NodeData = require(\"NodeData\");\n\n/**\n * 项目相关接口\n * @module\n */\nlet router = express.Router();\n\n/**\n * /wx/product/queryrecommend - 查询热门专区\n * @param {number} currentPage - 分页页码\n * @returns {HttpResult|Error} 查询结果,异常时返回500\n * @example\n * // 请求参数\n * city=深圳&currentPage=1\n * //响应结果\n * {\n *   \"data\":[\n *     {\n *       \"id\":10200,\n *       \"title\":\"牙齿美白（冷光，进口材料）\",\n *       \"standPrice\":2800,\n *       \"preferPrice\":2660,\n *       \"pricetype\":\"元\",\n *       \"priceunit\":\"次\",\n *       \"sales\":6,\n *       \"samllimg\":\"upload/image/hospital/dental/10004/yachimeibailengguangjinkoucailiao/77b29ee477d54bb2bf767f69448cbbe2.jpg\",\n *       \"profession_id\":24,\n *       \"hospital_id\":10004,\n *       \"hospitalname\":\"友睦齿科福田金润店\"\n *     }\n *   ],\n *   \"code\":0,\n *   \"message\":\"success\"\n * }\n */\nasync function queryrecommend(req:express.Request,res:express.Response){\n    if(req.body.currentPage){\n        let result:HttpResult;\n        let productCtrl:ProductCtrl = new ProductCtrl();\n        try{\n            result = await productCtrl.queryRecommend(req.body.currentPage);\n            res.send(result);\n        }catch(err){\n            console.log(err);\n            res.status(500);\n        }\n    }else{\n        res.status(400).end();\n    }\n}\nrouter.post(\"/queryrecommend\",queryrecommend);\n\n/**\n * /wx/product/querylist - 查询项目列表\n * @param {number} currentPage - 分页页码(必要)\n * @param {number} professionId - 项目分类,牙科，美容等(必要)\n * @param {string} city - 城市(非必要)\n * @param {string} area - 区域(非必要)\n * @param {number} itemId - 项目id(非必要)\n * @param {string} order - 排序(非必要)\n * @returns {HttpResult|Error} 查询结果,异常时返回500\n * @example\n * // 响应结果\n * [\n *   {\n *     \"id\":10017,\n *     \"title\":\"隐适美隐形矫正\",\n *     \"standPrice\":45000,\n *     \"preferPrice\":42750,\n *     \"pricetype\":\"元起\",\n *     \"priceunit\":\"副\",\n *     \"sales\":9,\n *     \"samllimg\":\"upload/image/hospital/dental/10002/20151023/yinshimeiyinxingjiaozheng_105658165.jpg\",\n *     \"professionId\":64,\n *     \"hospitalId\":10002,\n *     \"hospitalname\":\"友睦齿科福田时代科技店\",\n *     \"hospital\":{\"name\":\"友睦齿科福田时代科技店\"}\n *   }\n * ]\n */\nasync function queryList(req:express.Request,res:express.Response){\n    if(req.body.currentPage&&req.body.professionId){\n        let productCtrl:ProductCtrl = new ProductCtrl();\n        try{\n            let result:HttpResult = await productCtrl.queryList(req.body);\n            res.send(result);\n        }catch(err){\n            console.log(err);\n            res.send(500).end();\n        }\n    }else{\n        res.status(400).end();\n    }\n}\nrouter.post(\"/querylist\",queryList);\n\n/**\n * /wx/product/querybyid - 查询项目详情\n * @param {string} accessToken - 用户token\n * @param {string} productId - 项目id\n * @returns {HttpResult|Error} 查询结果,异常时返回500\n * @example\n * // 请求参数\n * id=10002\n * // 响应结果\n * {\n *   \"name\":\"友睦齿科福田时代科技店\",.\n *   \"address\":\"深圳市福田区深南大道7028号时代科技大厦裙楼三楼\",\n *   \"description\":\"友睦齿科成立于...\",\n *   \"logo\":\"upload/image/hospital/logo/youmuchikefutianshidaikejidian/142808792.png\"\n * }\n */\nasync function querybyid(req:express.Request,res:express.Response){\n    if(req.body.productId){\n        let productCtrl:ProductCtrl = new ProductCtrl();\n        try{\n            let result:HttpResult = await productCtrl.querybyid(req.body);\n            res.send(result);\n        }catch(err){\n            console.log(err);\n            res.send(500).end();\n        }\n    }else{\n        res.status(400).end();\n    }\n}\nrouter.post(\"/querybyid\",querybyid);\n\nexport = router;"],"sourceRoot":"../src"}