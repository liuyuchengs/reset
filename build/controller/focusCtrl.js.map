{"version":3,"sources":["controller/focusCtrl.ts"],"names":[],"mappings":";;;;;;;;;AAAA,kDAAkD;AAClD,MAAO,UAAU,WAAW,yBAAyB,CAAC,CAAC;AACvD,MAAO,YAAY,WAAW,2BAA2B,CAAC,CAAC;AAE3D;;;GAGG;AAEH;;;;GAIG;AACH,2BAAwC,WAAkB;;QACtD,IAAI,MAAiB,CAAC;QACtB,IAAI,GAAG,GAAG,6IAA6I,GAAC,WAAW,GAAC,uGAAuG,GAAC,WAAW,GAAC,IAAI,CAAC;QAC7R,IAAG,CAAC;YACA,IAAI,WAAW,GAAG,MAAM,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChD,MAAM,CAAC,IAAI,OAAO,CAAa,CAAC,OAAgC,EAAC,MAAwB;gBACrF,MAAM,GAAG,UAAU,CAAC,mBAAmB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;gBACxD,OAAO,CAAC,MAAM,CAAC,CAAC;YACpB,CAAC,CAAC,CAAA;QACN,CAAC;QAAA,KAAK,CAAA,CAAC,GAAG,CAAC,CAAA,CAAC;YACR,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,MAAM,CAAC,IAAI,OAAO,CAAa,CAAC,OAAgC,EAAC,MAAwB;gBACrF,MAAM,CAAC,GAAG,CAAC,CAAC;YAChB,CAAC,CAAC,CAAA;QACN,CAAC;IACL,CAAC;;AAfqB,yBAAiB,oBAetC,CAAA","file":"controller/focusCtrl.js","sourcesContent":["/// <reference path=\"./../../typings/index.d.ts\"/>\nimport HttpResult = require(\"./../modules/HttpResult\");\nimport MysqlConnect = require(\"./../modules/MysqlConnect\");\n\n/**\n * 关注相关的模块\n * @module\n */\n\n/**\n * 根据accessToken获取用户的粉丝数量和关注数量\n * @param {any} params - 经过express parser转换的req.body，需有accessToken属性\n * @returns {HttpResult|any} 查询结果，异常时返回error异常对象\n */\nexport async function getUserFocusCount(accessToken:string):Promise<HttpResult>{\n    let result:HttpResult;\n    let sql = \"select count(fansId) as countFansMan,(select count(focusId) from focus where fansId in (select user_id from user_token where access_token='\"+accessToken+\"')) as countFocusMan from focus where focusId in (select user_id from user_token where access_token='\"+accessToken+\"')\";\n    try{\n        let queryResult = await MysqlConnect.query(sql);\n        return new Promise<HttpResult>((resolve:(value:HttpResult)=>void,reject:(value:any)=>void)=>{\n            result = HttpResult.CreateSuccessResult(queryResult[0]);\n            resolve(result);\n        })\n    }catch(err){\n        console.log(err);\n        return new Promise<HttpResult>((resolve:(value:HttpResult)=>void,reject:(value:any)=>void)=>{\n            reject(err);\n        })\n    }\n}"],"sourceRoot":"../src"}