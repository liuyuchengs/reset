{"version":3,"sources":["controller/DoctorCtrl.ts"],"names":[],"mappings":";;;;;;;;;AACA,MAAO,YAAY,WAAW,2BAA2B,CAAC,CAAC;AAG3D;;;;;GAKG;AACH,uBAAoC,EAAS;;QACzC,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;QACtB,IAAI,GAAG,GAAG,+LAA+L,GAAC,EAAE,GAAC,sBAAsB,GAAC,IAAI,CAAC,WAAW,EAAE,GAAC,sBAAsB,GAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAC,CAAC,CAAC,GAAC,sBAAsB,GAAC,IAAI,CAAC,OAAO,EAAE,GAAC,IAAI,CAAC;QAC7U,IAAG,CAAC;YACA,IAAI,WAAW,GAAG,MAAM,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChD,MAAM,CAAC,IAAI,OAAO,CAAM,CAAC,OAAyB;gBAC9C,OAAO,CAAC,EAAC,IAAI,EAAC,WAAW,EAAC,CAAC,CAAC;YAChC,CAAC,CAAC,CAAA;QACN,CAAC;QAAA,KAAK,CAAA,CAAC,GAAG,CAAC,CAAA,CAAC;YACR,MAAM,CAAC,IAAI,OAAO,CAAM,CAAC,OAAyB,EAAC,MAAwB;gBACvE,MAAM,CAAC,GAAG,CAAC,CAAC;YAChB,CAAC,CAAC,CAAA;QACN,CAAC;IACL,CAAC;;AAbqB,qBAAa,gBAalC,CAAA","file":"controller/DoctorCtrl.js","sourcesContent":["import HttpResult = require(\"./../modules/HttpResult\");\nimport MysqlConnect = require(\"./../modules/MysqlConnect\");\n\n\n/**\n * 医生相关模块\n * @module\n * @pamra {number} id - 项目id\n * @returns {Object|Error} 返回查询结果\n */\nexport async function querySchedule(id:number):Promise<any>{\n    let date = new Date();\n    let sql = \"SELECT d.id,d.doctorname,d.hobby,d.score,d.hospitalid,d.face FROM doctor as d WHERE d.id in (SELECT doctorid FROM schedule WHERE hospital_id in (SELECT hospital_id FROM product WHERE id = '\"+id+\"') AND YEAR(date)= '\"+date.getFullYear()+\"' AND MONTH(date)= '\"+(date.getMonth()+1)+\"' AND DAY(date) >= '\"+date.getDate()+\"')\";\n    try{\n        let queryResult = await MysqlConnect.query(sql);\n        return new Promise<any>((resolve:(value:any)=>void)=>{\n            resolve({list:queryResult});\n        })\n    }catch(err){\n        return new Promise<any>((resovle:(value:any)=>void,reject:(value:any)=>void)=>{\n            reject(err);\n        })\n    }\n}"],"sourceRoot":"../src"}