{"version":3,"sources":["controller/ImageCtrl.ts"],"names":[],"mappings":";;;;;;;;;AAEA,MAAO,YAAY,WAAW,2BAA2B,CAAC,CAAC;AAE3D;;;GAGG;AAEH;;;;GAIG;AACH,oBAAiC,MAAU;;QACvC,IAAI,GAAG,GAAU,IAAI,CAAC;QACtB,EAAE,CAAA,CAAC,MAAM,CAAC,IAAI,KAAG,SAAS,CAAC,CAAA,CAAC;YACxB,GAAG,GAAG,uEAAuE,GAAE,MAAM,CAAC,MAAM,CAAC;QACjG,CAAC;QAAA,IAAI,CAAC,EAAE,CAAA,CAAC,MAAM,CAAC,IAAI,KAAG,UAAU,CAAC,CAAA,CAAC;YAC/B,GAAG,GAAG,6DAA6D,GAAE,MAAM,CAAC,MAAM,CAAC;QACvF,CAAC;QACD,EAAE,CAAA,CAAC,GAAG,CAAC,CAAA,CAAC;YACJ,IAAG,CAAC;gBACA,IAAI,MAAM,GAAc,MAAM,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACtD,MAAM,CAAC,IAAI,OAAO,CAAa,CAAC,OAAgC;oBAC5D,OAAO,CAAC,MAAM,CAAC,CAAC;gBACpB,CAAC,CAAC,CAAA;YACN,CAAC;YAAA,KAAK,CAAA,CAAC,GAAG,CAAC,CAAA,CAAC;gBACR,MAAM,CAAC,IAAI,OAAO,CAAa,CAAC,OAAgC,EAAC,MAAwB;oBACrF,MAAM,CAAC,GAAG,CAAC,CAAC;gBAChB,CAAC,CAAC,CAAA;YACN,CAAC;QACL,CAAC;IACL,CAAC;;AAnBqB,kBAAU,aAmB/B,CAAA","file":"controller/ImageCtrl.js","sourcesContent":["import NodeData = require(\"NodeData\");\nimport HttpResult = require(\"./../modules/HttpResult\");\nimport MysqlConnect = require(\"./../modules/MysqlConnect\");\nimport Tool = require(\"./../modules/Tool\");\n/**\n * 图片查询相关模块\n * @module\n */\n\n/**\n * 查询医院或者项目图片\n * @param {any} params - 经过express parser转换后的req.body,需有mainId和type属性\n * @returns {HttpResult|any} 查询结果，异常时返回error异常对象\n */\nexport async function queryImage(params:any){\n    let sql:string = null;\n    if(params.type===\"PRODUCT\"){\n        sql = \"select path as url from product_image where flag = 1 and productid = \"+ params.mainId;\n    }else if(params.type===\"HOSPITAL\"){\n        sql = \"select path as url from hospital_image where hospital_id = \"+ params.mainId;\n    }\n    if(sql){\n        try{\n            let result:HttpResult = await MysqlConnect.query(sql);\n            return new Promise<HttpResult>((resolve:(value:HttpResult)=>void)=>{\n                resolve(result);\n            })\n        }catch(err){\n            return new Promise<HttpResult>((resolve:(value:HttpResult)=>void,reject:(value:any)=>void)=>{\n                reject(err);\n            })\n        }\n    }\n}"],"sourceRoot":"../src"}