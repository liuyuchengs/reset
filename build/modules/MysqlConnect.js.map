{"version":3,"sources":["modules/MysqlConnect.ts"],"names":[],"mappings":";AAAA,mDAAmD;AACnD,MAAO,KAAK,WAAW,OAAO,CAAC,CAAC;AAEhC;;;GAGG;AAEH,UAAU;AACV,IAAI,QAAQ,GAAuB,IAAI,CAAC;AACxC,QAAQ;AACR,IAAI,KAAK,GAAe,IAAI,CAAC;AAE7B;;;GAGG;AACH;IACI,EAAE,CAAA,CAAC,QAAQ,KAAG,IAAI,IAAE,QAAQ,KAAG,SAAS,CAAC,CAAA,CAAC;QACtC,QAAQ,GAAG;YACP,IAAI,EAAC,MAAM;YACX,QAAQ,EAAC,QAAQ;YACjB,QAAQ,EAAC,QAAQ;YACjB,eAAe,EAAC,EAAE;SACrB,CAAA;IACL,CAAC;IACD,MAAM,CAAC,QAAQ,CAAC;AACpB,CAAC;AAED;;;GAGG;AACH;IACI,EAAE,CAAA,CAAC,KAAK,KAAG,IAAI,IAAE,KAAK,KAAG,SAAS,CAAC,CAAA,CAAC;QAChC,KAAK,GAAG,KAAK,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC,CAAC;IAC3C,CAAC;IACD,MAAM,CAAC,KAAK,CAAC;AACjB,CAAC;AAED;;;;GAIG;AACH,eAAsB,GAAU;IAC5B,IAAI,IAAI,GAAG,OAAO,EAAE,CAAC;IACrB,MAAM,CAAC,IAAI,OAAO,CAAM,CAAC,OAAyB,EAAC,MAAwB;QACvE,IAAI,CAAC,KAAK,CAAC,GAAG,EAAC,CAAC,GAAO,EAAC,IAAQ;YAC5B,EAAE,CAAA,CAAC,GAAG,KAAG,IAAI,CAAC,CAAA,CAAC;gBACX,MAAM,CAAC,GAAG,CAAC,CAAC;YAChB,CAAC;YAAA,IAAI,CAAA,CAAC;gBACF,OAAO,CAAC,IAAI,CAAC,CAAC;YAClB,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAA;AACN,CAAC;AAXe,aAAK,QAWpB,CAAA","file":"modules/MysqlConnect.js","sourcesContent":["/// <reference path=\"./../../typings/index.d.ts\" />\nimport mysql = require(\"mysql\");\n\n/**\n * 包装数据库连接对象\n * @module\n */\n\n// 连接池配置对象\nlet _options : mysql.IPoolConfig = null;\n// 连接池对象\nlet _pool:mysql.IPool = null;\n\n/**\n * 获取连接池配置对象\n * @returns {mysql.IPoolConfig} 连接池配置对象\n */\nfunction getOptions(){\n    if(_options===null||_options===undefined){\n        _options = {\n            user:\"root\",\n            password:\"888888\",\n            database:\"uokang\",\n            connectionLimit:10,\n        }\n    }\n    return _options;\n}\n\n/**\n * 获取连接池对象\n * @returns {mysql.IPool} 连接池对象\n */\nfunction getPool(){\n    if(_pool===null||_pool===undefined){\n        _pool = mysql.createPool(getOptions());\n    }\n    return _pool;\n}\n\n/**\n * 使用连接池执行查询操作，通过Promise对象返回结果\n * @param {string} sql - sql查询语句\n * @returns {any} 查询结果\n */\nexport function query(sql:string){\n    let pool = getPool();\n    return new Promise<any>((resolve:(value:any)=>void,reject:(value:any)=>void)=>{\n        pool.query(sql,(err:any,rows:any)=>{\n            if(err!==null){\n                reject(err);\n            }else{\n                resolve(rows);\n            }\n        });\n    })\n}\n"],"sourceRoot":"../src"}