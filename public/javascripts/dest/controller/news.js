define(function(){return function($scope,$rootScope,$location,Tool,Ajax){$scope.news=[],$scope.navValue="all",$scope.currentPage=1,$scope.pageRows=10,$scope.loading=!1,$scope.noProduct=!1,$scope.noProductText="",$scope.imgStyle={width:screen.width},$scope.navParam={all:{has:!0,val:"综合"},yake:{has:!1,val:"牙科"},meirong:{has:!1,val:"美容"},fck:{has:!1,val:"妇产科"},zhongyi:{has:!1,val:"中医理疗"}},window.onscroll=function(){if(!$scope.loading&&!$scope.noProduct){var body=document.body,html=document.documentElement,height=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight);height>window.innerHeight&&height-window.scrollY-window.innerHeight<100&&$scope.loadNext()}},$scope.init=function(){$rootScope.hasBgColor=!1,$scope.initSwiper(),$scope.loadNews()},$scope.initSwiper=function(){new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination",autoplay:5e3,autoplayDisableOnInteraction:!1,observeParents:!0,observer:!0})},$scope["switch"]=function(type){type!=$scope.navValue&&($scope.navValue=type,Tool.select(type,$scope.navParam),$scope.news=[],$scope.currentPage=1,$scope.noProduct=!1,$scope.loadNews())},$scope.loadNews=function(){Ajax.post({url:Tool.host+"/wx/health/queryByType",params:{type:$scope.navParam[$scope.navValue].val,currentPage:$scope.currentPage,pageRows:$scope.pageRows}}).then(function(data){0==data.code?data.data.length<1?($scope.news.length<1?$scope.noProductText="暂时没有资讯信息!":$scope.noProductText="已经没有项目了!",$scope.noProduct=!0):($scope.mergeImg(data.data),$scope.news=$scope.news.concat(data.data)):Tool.alert(data.message)})["catch"](function(){$scope.noProduct=!0,Tool.alert("查询数据失败，请稍后再试!")})["finally"](function(){$rootScope.loading=!1})},$scope.loadNext=function(){$scope.currentPage++,$scope.loadNews()},$scope.mergeImg=function(items){items.forEach(function(item){""!=item.picture&&null!=item.picture||(item.picture="../contents/img/p_default.png")})},$scope.toDetail=function(id){Tool.changeRoute("/news/detail","id="+id)},$scope.detail={},$scope.id=null,$scope.initDetail=function(){$scope.id=$location.search().id,$rootScope.hasBgColor=!1,Tool.noWindowListen(),$scope.loadDetail()},$scope.loadDetail=function(){Ajax.post({url:Tool.host+"/wx/health/querydetail",params:{id:$scope.id}}).then(function(data){0==data.code?(data.data.content=$scope.mergeDetail(data.data.content),$scope.detail=data.data):Tool.alert("查询数据失败，请稍后再试!")})["catch"](function(){Tool.alert("查询数据失败，请稍后再试!")})["finally"](function(){$rootScope.loading=!1})},$scope.mergeDetail=function(str){var arrayStr=str.split("\r\n");for(var index in arrayStr)arrayStr[index]=arrayStr[index].trim();return arrayStr}}});