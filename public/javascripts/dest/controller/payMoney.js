define(["require","exports"],function(require,exports){"use strict";function payMoney($scope,$rootScope,ToolService,AjaxService){$scope.showPay=!1,$scope.money={dealMoney:null,balance:null},$scope.choosePay=function(){$scope.money.balance>0?$scope.showPay=!0:ToolService.alert("没有可提取余额!")},$scope.hiddenPay=function(){$scope.showPay=!1};var queryMoney=function(){AjaxService.post({url:ToolService.host+"/wx/withDraw/myMoney",data:{accessToken:ToolService.user.accessToken}}).then(function(data){0==data.code?$scope.money=data.data:ToolService.alert(data.message)})};$scope.getMoney=function(flag,$event){$event.stopPropagation(),checkAccount(flag)?AjaxService.post({url:ToolService.host+"/wx/withDraw/apply",data:{accessToken:ToolService.user.accessToken,flag:flag}}).then(function(data){0==data.code&&($scope.showPay=!1,queryMoney())}):ToolService.alert("请先绑定微信或者支付宝账号!",function(){$rootScope.messageTip.has=!1,ToolService.changeRoute("/user/userinfo")})};var checkAccount=function(flag){return 1==flag&&null!=ToolService.user.alipay&&""!=ToolService.user.alipay||2==flag&&null!=ToolService.user.wxpay&&""!=ToolService.user.wxpay};ToolService.reset(),ToolService.checkLogin()?(ToolService.loadUser(),queryMoney()):ToolService.changeRoute("/user")}return payMoney});