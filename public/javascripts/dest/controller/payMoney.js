define(function(){return function($scope,$rootScope,Tool,Ajax){$scope.showPay=!1,$scope.money={dealMoney:null,balance:null},$scope.init=function(){$rootScope.hasBgColor=!1},$scope.init=function(){$rootScope.hasBgColor=!1,Tool.noWindowListen(),Tool.checkLogin()?(Tool.loadUserinfo(),$scope.queryMoney()):Tool.changeRoute("/user")},$scope.choosePay=function(){$scope.money.balance>0?$scope.showPay=!0:Tool.alert("没有可提取余额!")},$scope.hiddenPay=function(){$scope.showPay=!1},$scope.queryMoney=function(){Ajax.post({url:Tool.host+"/wx/withDraw/myMoney",params:{accessToken:Tool.userInfo.accessToken}}).then(function(data){0==data.code?$scope.money=data.data:Tool.alert(data.message)})["catch"](function(){Tool.alert("获取信息失败，请稍后再试!")})["finally"](function(){$rootScope.loading=!1})},$scope.getMoney=function(flag,$event){$event.stopPropagation(),$scope.checkAccount(flag)?Ajax.post({url:Tool.host+"/wx/withDraw/apply",params:{accessToken:Tool.userInfo.accessToken,flag:flag}}).then(function(data){0==data.code&&($scope.showPay=!1,$scope.queryMoney())})["catch"](function(){Tool.alert("提取失败，请稍后再试!")})["finally"](function(){$rootScope.loading=!1}):Tool.alert("请先绑定微信或者支付宝账号!",function(){$rootScope.hasTip=!1,Tool.changeRoute("/user/userinfo")})},$scope.checkAccount=function(flag){return 1==flag&&null!=Tool.userInfo.alipay&&""!=Tool.userInfo.alipay||2==flag&&null!=Tool.userInfo.wxpay&&""!=Tool.userInfo.wxpay}}});