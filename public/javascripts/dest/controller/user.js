define(function(){return function($scope,$rootScope,$location,Tool,Ajax){$scope.user={},$scope.isLogin=!1,$scope.init=function(){$rootScope.hasBgColor=!0,Tool.noWindowListen(),$scope.initText(),Tool.checkLogin()&&(Tool.loadUserinfo(),$scope.queryFocus())},$scope.initText=function(){Tool.checkLogin()?(Tool.loadUserinfo(),$scope.user=Tool.userInfo,$scope.isLogin=!0,""!==$scope.user.nickname&&null!==$scope.user.nickname||($scope.user.nickname="您还没有填写昵称")):($scope.user.face="../contents/img/men-head.png",$scope.user.tip="点击登录注册")},$scope.alert=function(mess){Tool.alert(mess)},$scope.queryFocus=function(){Ajax.post({url:Tool.host+"/wx/focus/focusManCount",params:{accessToken:Tool.userInfo.accessToken}}).then(function(data){0==data.code&&(null!==data.data.countFocusMan&&""!==data.data.countFocusMan||(data.data.countFocusMan=0),null!==data.data.countFansMan&&""!==data.data.countFansMan||(data.data.countFansMan=0),$scope.countFocusMan=data.data.countFocusMan,$scope.countFansMan=data.data.countFansMan)})["catch"](function(){$scope.countFocusMan=0,$scope.countFansMan=0,Tool.alert("获取粉丝信息失败!")})["finally"](function(){$rootScope.loading=!1})},$scope["goto"]=function(path,query){Tool.checkLogin()?Tool.changeRoute(path,query):Tool.changeRoute("/login","")}}});