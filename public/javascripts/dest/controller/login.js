define(function(){return function($scope,$rootScope,$location,Ajax,Tool){$scope.phone="",$scope.password="",$scope.init=function(){$rootScope.hasBgColor=!1,Tool.noWindowListen()},$scope.login=function(){if($scope.check()){var data={phone:$scope.phone,password:$scope.password};Ajax.post({url:Tool.host+"/wx/login/wxlogin",params:data}).then(function(data){0==data.code?(Tool.setLocal("user",data.data),$location.path("/user")):1==data.code?Tool.alert("账号或者密码错误,请重新输入"):Tool.alert("未知错误!")})["catch"](function(){Tool.alert("登录错误，请稍后再试！")})["finally"](function(){$rootScope.loading=!1})}else Tool.alert("请检查手机号码或者密码长度符合要求！")},$scope.check=function(){return!!($scope.password.length>=8&&$scope.password.length<=20)}}});