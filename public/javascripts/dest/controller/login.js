define(["require","exports"],function(require,exports){"use strict";function login($scope,$rootScope,$location,AjaxService,ToolService){$scope.phone="",$scope.password="",$scope.login=function(){check()?AjaxService.post({url:ToolService.host+"/wx/login/wxlogin",data:{phone:$scope.phone,password:$scope.password}}).then(function(data){0==data.code?(ToolService.setLocal("user",data.data),$location.path("/user")):1==data.code?ToolService.alert("账号或者密码错误,请重新输入"):ToolService.alert("未知错误!")}):ToolService.alert("请检查手机号码或者密码长度符合要求！")};var check=function(){return!!(/^1[3|4|5|7|8]\d{9}$/.test($scope.phone)&&$scope.password.length>=8&&$scope.password.length<=20)};ToolService.reset()}return login});