define(function(){return function($scope,$rootScope,Tool,Ajax){$scope.hasGift=!1,$scope.gift={},$scope.init=function(){$rootScope.loading=!1,Tool.noWindowListen(),Tool.loadUserinfo(),$scope.queryGift()},$scope.queryGift=function(){Ajax.get({url:Tool.host+"/wx/order/queryUserGiftCode",headers:{accessToken:Tool.userInfo.accessToken}}).then(function(data){0==data.code&&data.data.length>0&&($scope.gift=data.data[0],$scope.hasGift=!0)})["catch"](function(){Tool.alert("获取惠赠信息失败，请稍后再试!")})["finally"](function(){$rootScope.loading=!1})}}});