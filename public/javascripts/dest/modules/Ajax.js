define(["require","exports"],function(require,exports){"use strict";var Ajax=function(){function Ajax($rootScope,$http,$q,Tool){this.$rootScope=$rootScope,this.$http=$http,this.$q=$q,this.Tool=Tool}return Ajax.prototype.get=function(obj){var _this=this;if(obj.url){this.$rootScope.load.has=!0;var defered_1=this.$q.defer(),headers={};return obj.headers&&obj.headers.accessToken&&(headers.accessToken=obj.headers.accessToken),this.$http.get(obj.url,{headers:headers}).success(function(data){return _this.$rootScope.load.has=!1,defered_1.resolve(data)}).error(function(data){return _this.$rootScope.load.has=!1,_this.alert("连接数据失败"),defered_1.reject(data)}),defered_1.promise}},Ajax.prototype.post=function(obj){var _this=this;if(obj.url){this.$rootScope.load.has=!0;var defered_2=this.$q.defer(),headers={};obj.headers&&(obj.headers.contentType&&(headers["Content-Type"]=obj.headers.contentType),obj.headers.accessToken&&(headers.accessToken=obj.headers.accessToken));var dataStr=this.Tool.convertParams(obj.data);return this.$http.post(obj.url,dataStr,{headers:headers}).success(function(data){return _this.$rootScope.load.has=!1,defered_2.resolve(data)}).error(function(data){return _this.$rootScope.load.has=!1,_this.alert("连接数据失败"),defered_2.reject(data)}),defered_2.promise}},Ajax.prototype.alert=function(mess,callback){var _this=this;this.$rootScope.messageTip.message=mess,this.$rootScope.messageTip.hasCancel=!1,this.$rootScope.messageTip.hasComfirm=!0,this.$rootScope.messageTip.has=!0,callback?this.$rootScope.messageTip.comfirm=callback:this.$rootScope.messageTip.comfirm=function(){_this.$rootScope.messageTip.has=!1}},Ajax}();return Ajax});